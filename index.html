<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ระบบจองคอมพิวเตอร์</title>
  <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database.js"></script>
  <style>
    /* ข้อมูล CSS ของคุณที่มีอยู่แล้ว */
  </style>
</head>
<body>
  <h1>ระบบจองคอมพิวเตอร์</h1>

  <!-- หน้าหลัก -->
  <div class="container btn-container">
    <button onclick="showBookingPage()">เข้าสู่ระบบจอง</button>
  </div>

  <!-- หน้า ระบบจอง -->
  <div class="container booking-page" id="bookingPage">
    <h2>จองคอมพิวเตอร์</h2>
    <label for="startTime">เลือกเวลาเริ่มเล่น:</label>
    <input type="time" id="startTime">
    <label for="duration">เลือกระยะเวลาที่จะเล่น (นาที):</label>
    <select id="duration">
      <option value="15">15 นาที</option>
      <option value="30">30 นาที</option>
      <option value="45">45 นาที</option>
      <option value="60">60 นาที</option>
    </select>
    <button onclick="bookComputer()">จองและรอเวลาเริ่ม</button>
    <div id="status"></div>
  </div>

  <!-- ข้อมูลจองก่อนหน้า -->
  <div class="container" id="previousBookings">
    <h3>ข้อมูลจองก่อนหน้า:</h3>
    <div id="bookingList"></div>
  </div>

  <script>
    // Firebase Configuration
    const firebaseConfig = {
  apiKey: "AIzaSyCDLjcitmrqHO-3Wf_pT7lbdk3Kh_MWTpk",
  authDomain: "computer-booking-e6341.firebaseapp.com",
  projectId: "computer-booking-e6341",
  storageBucket: "computer-booking-e6341.firebasestorage.app",
  messagingSenderId: "223463040793",
  appId: "1:223463040793:web:ff8bf99e9fb599a4a08788",
  measurementId: "G-TL2M9FJEDT"
};

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const database = firebase.database(app);

    // ฟังก์ชันแสดงข้อมูลจอง
    function displayPreviousBookings() {
      const bookingList = document.getElementById('bookingList');
      
      // อ่านข้อมูลจาก Firebase
      firebase.database().ref('bookings').on('value', function(snapshot) {
        const bookings = snapshot.val() || [];
        bookingList.innerHTML = '';

        if (!bookings || bookings.length === 0) {
          bookingList.innerHTML = '<p>ไม่มีการจอง</p>';
          return;
        }

        Object.keys(bookings).forEach((key) => {
          const booking = bookings[key];
          bookingList.innerHTML += `
            <div class="booking-details">
              <strong>${booking.name}</strong> จองเวลา: ${booking.startTime} ระยะเวลา: ${booking.duration} นาที
            </div>
          `;
        });
      });
    }

    // ฟังก์ชันจองคอมพิวเตอร์
    function bookComputer() {
      const startTime = document.getElementById('startTime').value;
      const duration = parseInt(document.getElementById('duration').value);
      const status = document.getElementById('status');
      
      if (!startTime) {
        status.innerText = '⛔ กรุณาเลือกเวลาเริ่มเล่น';
        return;
      }

      const bookingDetails = {
        name: 'ผู้จองคนที่ 1',
        startTime: startTime,
        duration: duration
      };

      // เก็บข้อมูลการจองใน Firebase
      firebase.database().ref('bookings').push(bookingDetails);

      status.innerText = `✅ การจองเสร็จสิ้น!`;

      // แสดงการจองก่อนหน้า
      displayPreviousBookings();
    }

    // เมื่อโหลดหน้าเว็บ ให้แสดงการจองก่อนหน้า
    window.onload = displayPreviousBookings;
  </script>
</body>
</html>
